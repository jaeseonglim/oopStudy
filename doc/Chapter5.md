#5장. 책임 할당하기

5장 학습 목표.
1. 설계는 트레이드오프 활동이다.
2. GRASP 패턴 이해하기.

### 01. 책임 주도 설계
데이터 중심 설계 → 책임 중심 설계 전환하기 위해서는 다음 두 원칙을 따라야 한다.

- 데이터보다 행동을 먼저 결정하라
````text
[객체의 데이터 중심]
객체가 포함해야 하는 데이터가 무엇인가를 결정 후 오퍼레이션을 결정한다.
but..
[객체의 책임 중심]
객체가 수행해야 하는 책임은 무엇인가를 결정 후 필요한 데이터를 결정한다.

즉. 책임을 먼저 결정 후 객체의 상태를 결정해야 한다.
````

- 협력이라는 문맥안에서 책임을 결정하라
````text
메시지(메소드)를 결장한 후에 객체를 선택하라.
(객체를 가지고 있기 때문에 메시지를 보내는 것이 아니다. 메시지를 전송하기 때문에 객체를 갖게 된 것이다.)
````

### 02. 책임 할당을 위한 GRASP 패턴(General Responsibility Assignment Software Pattern)
GRASP: "일반적인 책임을 할당하기 위한 소프트웨어 패턴"의 약자로 객체에게 책임을 할당할 때 지침으로 삼을 수 있는 원칙들의 집합을 패턴 형식으로 정리한 것이다.

- 도메인 개념에서 출발하기
````text
설계를 시작하기 전에 도메인에 대한 개략적인 모습을 그려보는 것이 유용하다.
(도메인 안에는 무수한 개념들이 존재하며 이 도메인 개념들을 책임 할당의 대상으로 사용하면  코드에 도메인의 모습을 투영하기가 좀 더 수월해진다.)

이 단계에서는 책임을 할당 받을 객체들의 종류와 관계에 대한 유용한 정보를 제공할 수 있다면 충분하다.
(도매인 개념을 정리하는 데 너무 많은 시간을 들이지 말고 빠르게 설꼐와 구현을 진행하라)

올바른 도메인 모델이란 존재하지 않는다.
- 올바른 구현을 이끌어 낼 수만 있다면, 올바른 도메인 모델이다.

도메인 모델은 구현과 연관있다.
- 도메인 모델은 도메인 개념을 개념적으로 표헌한 것이지만, 그 안에 포함된 개념과 관계는 구현의 기반이 돼야 한다.(1:N, N:N, etc...)
  즉 도메인 모델이 구현을 염두에 두고 구조화되는 것이 바람직하다는 것을 의미한다.  
````

- 정보 전문가에게 책임을 할당하라.
```text
책임 주도 설계 방식의 첫 단계는 애플리케이션이 제공해야 하는 기능을 애플리케이션의 책임으로 생각하는 것이다.
책임을 애플리케이션에 대해 전송된 메시지로 간주하고 이 메시지를 책임질 첫 번째 객체를 선택하는 것으로 설계를 시작한다.
(메시지는 메시지를 수신할 객체가 아니라, 메시지를 전송할 객체의 의도를 반영해서 결정해야 한다.)

1. 메시지를 전송할 객체는 무엇을 원하는가?
- ex) 예매하라.
2. 메시지를 수산할 적합한 객체는 누구인가?
- 책임을 수행할 정보를 알고 있는 객체에게 할당(INFORMATION EXPERT PATTERN)
- 정보 전문가에게 메시지 전송 후, 
   스스로 처리할 수 없는 작업이 있다면 외부의 도움을 요청(새로운 메시지가 된다.)

※ INFORMATION EXPERT PATTERN
- 객체가 자신이 소유하고 있는 정보와 관련된 작업을 수행한다는 일반적인 직관을 표현한 것이다.
  (여기서 정보는 데이터와 다르다는 사실에 주의)
  책임을 수행하는 객체가 정보를 알고 있다고 해서 그 정보를 저장하고 있을 필요는 없다.
  객체는 해당 정보를 제공할 수 있는 다른 객체를 알고 있거나 필요한 정보를 계산해서 제공할 수도 있다.
```

- 높은 응집도와 낮은 결합도.
```text
낮은 결합도(LOW COUPLING)
- 책임 할당을 검토하거나, 여러 설계 대안이 있을 때 낮은 결합도를 유지할 수 있는 설계를 선택해라.
  (도메인 개념을 살펴보며, 설계 전체적으로 결합도를 추가하지 않고도 협력을 완성시킬 수 있는 설계를 해라)
   Ex) Screening ↔ DiscountCondtion / Movie ↔ DiscountCondtion : 기능적 측면으로는 동일지만, 변경에 취약

높은 응잡도(HIGH COHESION)
- 객체 자신의 책임에 충실히..
- 객체 간 연관된 협력만 전달할 수 있도록 설계하라. 
```

- 창조자에게 객체 생성 책임을 할당하라.
````text
CREATOR(창조자) PATTERN
객체를 생성할 책임을 어떤 객체에게 할당할지에 대한 지침을 제공
-객체 A를 생성해야할 때, 아래 조건을 최대한 많이 만족하는 B에게 객체 생성 책임을 할당하라.
  * B가 A객체를 포함하거나 참조한다.
  * B가 A객체를 기록한다.
  * B가 A객체를 긴밀하게 사용한다.
  * B가 A객체를 초기화하는 데 필요한 데이터를 가지고 있다.(이 경우 B는 A에 대한 정보 전문가다)

````

추가적인 GRASP 패턴: https://nesoy.github.io/articles/2019-05/GRASP-Pattern

